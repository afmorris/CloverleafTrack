@model LeaderboardViewModel

@{
    ViewBag.Title = "Leaderboard";
}

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-4xl font-bold text-gray-900 dark:text-white">Leaderboard</h1>
        <p class="text-lg text-gray-600 dark:text-gray-400 mt-2">Top all-time performance for each event</p>
    </div>

    <!-- Environment Tabs -->
    <div class="mb-8">
        <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-sm">
            <!-- Tab Headers -->
            <div class="flex border-b border-gray-200 dark:border-gray-700">
                <button class="env-tab flex-1 py-4 px-6 font-bold text-lg transition-all flex items-center justify-center gap-3" data-tab="indoor">
                    🏢 INDOOR
                </button>
                <button class="env-tab flex-1 py-4 px-6 font-bold text-lg transition-all flex items-center justify-center gap-3" data-tab="outdoor">
                    ☀️ OUTDOOR
                </button>
            </div>

            <!-- Tab Content Wrapper -->
            <div class="p-8">
                <!-- Indoor Content -->
                <div id="env-indoor" class="env-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        
                        <!-- Boys Indoor -->
                        <div>
                            <h2 class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-6 flex items-center gap-2">
                                <span>♂</span> Boys
                            </h2>
                            
                            @await Html.PartialAsync("_LeaderboardGenderSection", new Tuple<bool, bool, List<LeaderboardCategoryViewModel>>(true, true, Model.BoysIndoorCategories))
                        </div>

                        <!-- Girls Indoor -->
                        <div>
                            <h2 class="text-2xl font-bold text-pink-600 dark:text-pink-400 mb-6 flex items-center gap-2">
                                <span>♀</span> Girls
                            </h2>
                            
                            @await Html.PartialAsync("_LeaderboardGenderSection", new Tuple<bool, bool, List<LeaderboardCategoryViewModel>>(false, true, Model.GirlsIndoorCategories))
                        </div>
                    </div>
                </div>

                <!-- Outdoor Content -->
                <div id="env-outdoor" class="env-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        
                        <!-- Boys Outdoor -->
                        <div>
                            <h2 class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-6 flex items-center gap-2">
                                <span>♂</span> Boys
                            </h2>
                            
                            @await Html.PartialAsync("_LeaderboardGenderSection", new Tuple<bool, bool, List<LeaderboardCategoryViewModel>>(true, false, Model.BoysOutdoorCategories))
                        </div>

                        <!-- Girls Outdoor -->
                        <div>
                            <h2 class="text-2xl font-bold text-pink-600 dark:text-pink-400 mb-6 flex items-center gap-2">
                                <span>♀</span> Girls
                            </h2>
                            
                            @await Html.PartialAsync("_LeaderboardGenderSection", new Tuple<bool, bool, List<LeaderboardCategoryViewModel>>(false, false, Model.GirlsOutdoorCategories))
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const envTabs = document.querySelectorAll('.env-tab');
        const envContents = document.querySelectorAll('.env-content');

        envTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const targetTab = this.dataset.tab;

                // Update tab styles
                envTabs.forEach(t => {
                    if (t.dataset.tab === targetTab) {
                        if (targetTab === 'outdoor') {
                            t.classList.add('bg-gradient-to-r', 'from-amber-600', 'to-yellow-500', 'text-white');
                            t.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                        } else {
                            t.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-white');
                            t.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                        }
                    } else {
                        t.classList.remove('bg-gradient-to-r', 'from-amber-600', 'to-yellow-500', 'from-blue-600', 'to-blue-500', 'text-white');
                        t.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-600', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                    }
                });

                // Show/hide content
                envContents.forEach(content => {
                    if (content.id === `env-${targetTab}`) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });

        // Set Indoor as default active tab
        document.querySelector('.env-tab[data-tab="indoor"]')?.click();
    });
</script>
